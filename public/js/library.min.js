/*!
 * Symfony Website Base Template - Symfony Website v2.0.0 (https://website.myfeup.com)
 * Copyright 2020-2021 costapt
 * Licensed under MIT (https://github.com/rcostapr/symfony-website/blob/master/LICENSE)
 */

function registerRawData(){$(".btn-raw").on("click",function(){$(this).hasClass("btn-raw-up")?($(this).removeClass("btn-raw-up"),$(this).addClass("btn-raw-down")):($(this).removeClass("btn-raw-down"),$(this).addClass("btn-raw-up"));var e=$(this).closest(".card").find(".card-body");$(e).slideToggle(500)})}function scrollTo(e){e&&$("html,body").animate({scrollTop:e.offset().top-$(window).height()/2},1e3)}function clearOptions(e){let t=e.find("option");t.each(function(e){option=$(this),""==option.val()?option.prop("selected",!0):option.remove()})}function sendRequestTo(e,a,t,n=null){a.addClass("btn-spin"),$.ajax({type:"POST",url:e,data:t,dataType:"json",success:function(e){return a.removeClass("btn-spin"),e.error?(toastr.warning(e.error,"Aviso:"),!1):e.session?(toastr.error(e.session,"Sessão Expirou:"),setTimeout(function(){location.replace("/")},2e3),!1):(!0===e.success&&n&&n(e),void(!1===e.success&&toastr.error(e.info,"Aviso:",{onHidden:function(){e.location&&window.location.replace(e.location)},timeOut:800})))},error:function(e,t,n){a.removeClass("btn-spin");n=e.status+"<br>"+n;toastr.error(n,"Aviso:")}})}function sendFormTo(e,t,n=null){$.ajax({method:"POST",type:"POST",url:e,data:t,enctype:"multipart/form-data",cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(e){return $(".btn-spin").removeClass("btn-spin"),e.error?(console.log(e),toastr.warning(e.error,"Aviso:"),!1):e.session?(toastr.error(e.session,"Sessão Expirou:"),setTimeout(function(){window.location("/")},2e3),!1):void(!0===e.success&&n&&n(e))},error:function(e,t,n){$(".btn-spin").removeClass("btn-spin"),toastr.error(n,"Error: "+e.status)}})}function getDataTableOptions(){return{dom:"lBfrtip",buttons:[{extend:"copy",className:"btn btn-copy"},{extend:"csv",className:"btn btn-csv"},{extend:"excel",className:"btn btn-excel"},{extend:"pdf",className:"btn btn-pdf"},{extend:"print",className:"btn btn-print"}],language:{decimal:".",emptyTable:"Sem Dados Disponíveis",info:"Mostrar _START_ até _END_ de _TOTAL_ registos",infoEmpty:"Sem Registos",infoFiltered:"(filtro de um total de _MAX_ registos)",infoPostFix:"",thousands:",",lengthMenu:"Mostar _MENU_ Registos",loadingRecords:"Loading...",processing:"Processar...",search:"",zeroRecords:"Não foram encontrados registos",paginate:{previous:"&lt;",next:"&gt;",first:"&lt;&lt;",last:"&gt;&gt;"},aria:{sortAscending:": Ordenar Ascendente",sortDescending:": Ordenar Descendente"}},paging:!1}}function getSimpleDataTableOptions(){return{dom:"lBfrtip",buttons:[],language:{decimal:".",emptyTable:"Sem Dados Disponíveis",info:"Mostrar _START_ até _END_ de _TOTAL_ registos",infoEmpty:"Sem Registos",infoFiltered:"(filtro de um total de _MAX_ registos)",infoPostFix:"",thousands:",",lengthMenu:"Mostar _MENU_ Registos",loadingRecords:"Loading...",processing:"Processar...",search:"",zeroRecords:"Não foram encontrados registos",paginate:{previous:"&lt;",next:"&gt;",first:"&lt;&lt;",last:"&gt;&gt;"},aria:{sortAscending:": Ordenar Ascendente",sortDescending:": Ordenar Descendente"}},paging:!1}}function getToastrOptions(){return{closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"400",hideDuration:"1000",timeOut:"3000",extendedTimeOut:"500",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut",tapToDismiss:!1}}function toggleActive(e){e.prop("disabled",!0);let t=e.data("active"),n=e.find(".far");e.addClass("fa-spin"),setTimeout(()=>{e.removeClass("fa-spin"),n.toggleClass("fa-check-square"),n.toggleClass("fa-square"),n.hasClass("fa-check-square")?n.css("color","green"):n.css("color","red"),e.data("active","1"==t?"0":"1"),e.prop("disabled",!1)},500)}function setActive(e){var t=e.data("active");let n=e.find("[data-fa-i2svg]");"1"==t?(n.removeClass("fa-square"),n.addClass("fa-check-square"),n.css("color","green")):(n.removeClass("fa-check-square"),n.addClass("fa-square"),n.css("color","red"))}$.datepicker.regional.pt={closeText:"Fechar",prevText:"Anterior",nextText:"Seguinte",currentText:"Hoje",monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],weekHeader:"Sem",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},$.datepicker.setDefaults($.datepicker.regional.pt),$.fn.select2.defaults.set("theme","bootstrap4"),$.fn.select2.defaults.set("language","pt"),Dropzone.autoDiscover=!1,$(function(){$("#adminmodal").on("hidden.bs.modal",function(e){$(this).find(".modal-title").empty(),$(this).find(".modal-body").empty(),$(this).find(".modal-dialog").hasClass("modal-xl")||$(this).find(".modal-dialog").addClass("modal-xl")}),$(".btn-active").on("click",function(){toggleActive($(this))}),registerRawData()});const toBase64=a=>new Promise((e,t)=>{const n=new FileReader;n.readAsDataURL(a),n.onload=()=>e(n.result),n.onerror=e=>t(e)});let getBase64File=(e,t,n)=>{for(var a=atob(e),o=new Array(a.length),s=0;s<a.length;s++)o[s]=a.charCodeAt(s);e=new Uint8Array(o),n=new Blob([e],{type:n}),n=URL.createObjectURL(n);let i=document.createElement("a");i.setAttribute("id","downloadfile"),i.setAttribute("href",n),i.setAttribute("download",t);t=new MouseEvent("click");i.dispatchEvent(t)};function number_format(e,t,n,a){e=(e+"").replace(",","").replace(" ","");var o=isFinite(+e)?+e:0,e=isFinite(+t)?Math.abs(t):0,t=void 0===a?",":a,a=void 0===n?".":n,n="";return 3<(n=(e?function(e,t){t=Math.pow(10,t);return""+Math.round(e*t)/t}(o,e):""+Math.round(o)).split("."))[0].length&&(n[0]=n[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,t)),(n[1]||"").length<e&&(n[1]=n[1]||"",n[1]+=new Array(e-n[1].length+1).join("0")),n.join(a)}function bs_input_file(){$(".input-file").before(function(){if(!$(this).prev().hasClass("input-ghost")){var e=$("<input type='file' class='input-ghost' style='visibility:hidden; height:0'>");return e.attr("name",$(this).attr("name")),e.on("change",function(){e.next(e).find("input").val(e.val().split("\\").pop())}),$(this).find("button.btn-choose").on("click",function(){e.trigger("click")}),$(this).find("button.btn-reset").on("click",function(){e.val(null),$(this).parents(".input-file").find("input").val(null)}),$(this).find("input").css("cursor","pointer"),$(this).find("input").on("mousedown",function(){return $(this).parents(".input-file").prev().trigger("click"),!1}),e}})}function limitChar(e){var t=e.parent().find("div.countdown");let n=e.val();var a=500-n.length;$(t).html("#"+a),a<0&&(e.val(n.substring(0,500)),$(t).html("#0"))}function dateRange(e,n,t=!1){const a=new Date;var o=new Date(a.getFullYear()+1,a.getMonth(),a.getDate()),s=("0"+a.getDate()).slice(-2)+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+a.getFullYear();("0"+o.getDate()).slice(-2),("0"+(o.getMonth()+1)).slice(-2),o.getFullYear();e.attr("readonly",!0),n.attr("readonly",!0),e.css("cursor","pointer"),n.css("cursor","pointer"),t||(e.val(s),n.val(s));let i={showAnim:"slideDown",dateFormat:"dd-mm-yy",changeMonth:!0,changeYear:!0,minDate:-30,defaultDate:0,onSelect:function(e,t){n.datepicker("option","minDate",e)}},r={showAnim:"slideDown",dateFormat:"dd-mm-yy",changeMonth:!0,changeYear:!0,minDate:-30,defaultDate:0};t&&(i.defaultDate=e.val(),r.defaultDate=n.val()),e.datepicker(i),n.datepicker(r),e.on("change",checkValidDate),n.on("change",checkValidDate)}function checkValidDate(){let e=$(this);var t=e.val().split("-");3!==t.length&&e.val("");var n=parseInt(t[0]);(n<1||31<n)&&e.val("");var a=parseInt(t[1])-1;(a<0||12<a)&&e.val("");t=parseInt(t[2]);"Invalid Date"==new Date(t,a,n)&&e.val("")}